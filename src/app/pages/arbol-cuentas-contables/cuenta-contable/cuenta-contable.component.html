<ngx-selector-contable #selectorContable
					   (selectAcount)="setSelectedCount($event)"
					   [account]="prefix"
					   [claseMinima]="cuenta ? cuenta.Nivel - 1 : 3"
					   [editable]="!cuenta">
</ngx-selector-contable>

<nb-card class="cuenta-contable"
		 *ngIf="form">
	<nb-card-body>
		<form (ngSubmit)="onSubmit()"
			  [formGroup]="form"
			  class="cuenta-form">
			<mat-grid-list cols="6"
						   rowHeight="68px">
				<mat-grid-tile colspan="5"
							   rowspan="1">
					<mat-form-field class="form-group"
									appearance="legacy">
						<mat-label>{{ "CUENTAS_CONTABLES.form_codigo" | translate }}*</mat-label>
						<input type="text"
							   matInput
							   placeholder="{{ 'CUENTAS_CONTABLES.form_codigo_placeholder' | translate }}"
							   [formControl]="form.controls['Codigo']" />
						<span matPrefix
							  *ngIf="prefix">{{ prefix }}-</span>
						<mat-error *ngIf="form.controls['Codigo'].errors">
							{{ form.controls["Codigo"].errors.msg || ("CUENTAS_CONTABLES.form_error" | translate) }}
						</mat-error>
						<mat-hint>
							<strong>
								{{ "CUENTAS_CONTABLES.form_codigo_hint" | translate }}
							</strong>
						</mat-hint>
					</mat-form-field>
				</mat-grid-tile>
				<mat-grid-tile colspan="1"
							   rowspan="1">
					<section class="form-group"
							 appearance="legacy">
						<mat-slide-toggle [formControl]="form.controls['Activo']"
										  [color]="'primary'">
							{{ "CUENTAS_CONTABLES.form_disponible" | translate }}
						</mat-slide-toggle>
					</section>
				</mat-grid-tile>

				<mat-grid-tile colspan="6"
							   rowspan="1">
					<mat-form-field class="form-group"
									appearance="legacy">
						<mat-label>
							{{ "CUENTAS_CONTABLES.form_nombre" | translate }}*
						</mat-label>
						<input type="text"
							   matInput
							   placeholder="{{ 'CUENTAS_CONTABLES.form_nombre_placeholder' | translate }}"
							   [formControl]="form.controls['Nombre']" />
						<mat-error *ngIf="form.controls['Nombre'].errors">
							{{ form.controls["Nombre"].errors.msg || ("CUENTAS_CONTABLES.form_error" | translate)}}
						</mat-error>
						<mat-hint>
							<strong>
								{{ "CUENTAS_CONTABLES.form_nombre_hint" | translate }}
							</strong>
						</mat-hint>
					</mat-form-field>
				</mat-grid-tile>

				<mat-grid-tile colspan="2"
							   rowspan="1">
					<mat-form-field class="form-group"
									appearance="legacy">
						<mat-label>{{ "CUENTAS_CONTABLES.form_naturaleza" | translate }}*</mat-label>
						<mat-select [formControl]="form.controls['NaturalezaCuentaID']">
							<mat-option *ngFor="let naturaleza of naturalezas"
										[value]="naturaleza.Id">
								{{ naturaleza.Label }}
							</mat-option>
						</mat-select>
						<mat-error *ngIf="form.controls['NaturalezaCuentaID'].errors">
							{{ form.controls["NaturalezaCuentaID"].errors.msg || ("CUENTAS_CONTABLES.form_error" | translate) }}
						</mat-error>
					</mat-form-field>
				</mat-grid-tile>

				<mat-grid-tile colspan="2"
							   rowspan="1">
					<mat-form-field class="form-group"
									appearance="legacy">
						<mat-label>{{ "CUENTAS_CONTABLES.form_tipo_cuenta" | translate }}*</mat-label>
						<mat-select [formControl]="form.controls['TipoCuentaID']">
							<mat-option *ngFor="let tipo of tipoCuentas"
										[value]="tipo.Id">
								{{ tipo.Label }}
							</mat-option>
						</mat-select>
						<mat-error *ngIf="form.controls['TipoCuentaID'].errors">
							{{ form.controls["TipoCuentaID"].errors.msg || ("CUENTAS_CONTABLES.form_error" | translate) }}
						</mat-error>
					</mat-form-field>
				</mat-grid-tile>

				<mat-grid-tile colspan="2"
							   rowspan="1">
					<mat-form-field class="form-group"
									appearance="legacy">
						<mat-label>{{ "CUENTAS_CONTABLES.form_detalle" | translate }}*</mat-label>
						<mat-select [formControl]="form.controls['DetalleCuentaID']">
							<mat-option *ngFor="let detalle of detalleCuentas"
										[value]="detalle.Id">
								{{ detalle.Label }}
							</mat-option>
						</mat-select>
						<mat-error *ngIf="form.controls['DetalleCuentaID'].errors">
							{{ form.controls["DetalleCuentaID"].errors.msg || ("CUENTAS_CONTABLES.form_error" | translate) }}
						</mat-error>
					</mat-form-field>
				</mat-grid-tile>

				<mat-grid-tile colspan="2"
							   rowspan="1">
					<section class="form-group"
							 appearance="legacy">
						<mat-slide-toggle [formControl]="form.controls['RequiereTercero']"
										  [color]="'primary'">
							{{ "CUENTAS_CONTABLES.form_requiere_tercero" | translate }}
						</mat-slide-toggle>
					</section>
				</mat-grid-tile>

				<mat-grid-tile colspan="2"
							   rowspan="1">
					<section class="form-group"
							 appearance="legacy">
						<mat-slide-toggle [formControl]="form.controls['Ajustable']"
										  [color]="'primary'">
							{{ "CUENTAS_CONTABLES.form_ajustable" | translate }}
						</mat-slide-toggle>
					</section>
				</mat-grid-tile>

				<mat-grid-tile colspan="2"
							   rowspan="1">
					<section class="form-group"
							 appearance="legacy">
						<mat-slide-toggle [formControl]="form.controls['Nmnc']"
										  [color]="'primary'">
							{{ "CUENTAS_CONTABLES.form_nmnc" | translate }}
						</mat-slide-toggle>
					</section>
				</mat-grid-tile>

				<mat-grid-tile colspan="6"
							   rowspan="1">
					<mat-form-field class="form-group"
									appearance="legacy">
						<mat-label>{{ "CUENTAS_CONTABLES.form_centro_costo" | translate }}</mat-label>
						<mat-select [formControl]="form.controls['CentroDecostosID']">
							<mat-option *ngFor="let centro of centroCostos"
										[value]="centro.Id">
								{{ centro.Label }}
							</mat-option>
						</mat-select>
						<mat-error *ngIf="form.controls['CentroDecostosID'].errors">
							{{ form.controls["CentroDecostosID"].errors.msg || ("CUENTAS_CONTABLES.form_error" | translate) }}
						</mat-error>
					</mat-form-field>
				</mat-grid-tile>

				<mat-grid-tile colspan="6"
								*ngIf="detalleCondicionales.bancos"
							   rowspan="1">
					<mat-form-field class="form-group"
									appearance="legacy">
						<mat-label>{{ "CUENTAS_CONTABLES.form_cuenta_bancaria" | translate }}</mat-label>
						<input type="text"
							   matInput
							   placeholder="{{ 'CUENTAS_CONTABLES.form_cuenta_bancaria' | translate }}"
							   [formControl]="form.controls['CuentaBancariaID']"
							   [matAutocomplete]="autoGroup"
							   autocomplete="off" />
						<mat-autocomplete #autoGroup="matAutocomplete"
										  [displayWith]="dislayBanco">
							<mat-optgroup *ngFor="let group of bancosFilter | async"
										  [label]="group.group">
								<mat-option *ngFor="let cuenta of group.data"
											[value]="cuenta">
									{{ cuenta.NombreBanco }} / {{ cuenta.NombreSucursal }} - {{ cuenta.NumeroCuenta }}
								</mat-option>
							</mat-optgroup>
						</mat-autocomplete>
						<mat-error *ngIf="form.controls['CuentaBancariaID'].errors">
							{{ form.controls["CuentaBancariaID"].errors.msg || ("CUENTAS_CONTABLES.form_error" | translate) }}
						</mat-error>
					</mat-form-field>
				</mat-grid-tile>

				<mat-grid-tile colspan="3"
								*ngIf="detalleCondicionales.iva"
							   rowspan="1">
					<mat-form-field class="form-group"
									appearance="legacy">
						<mat-label>{{ 'CUENTAS_CONTABLES.iva' | translate }}*</mat-label>
						<mat-select [formControl]="form.controls['TipoRetencionID']">
							<mat-option *ngFor="let iva of tipoIvas"
										[value]="iva.Id">
								{{ iva.Label }}
							</mat-option>
						</mat-select>
						<mat-error *ngIf="form.controls['TipoRetencionID'].errors">
							{{ form.controls["TipoRetencionID"].errors.msg || ("CUENTAS_CONTABLES.form_error" | translate) }}
						</mat-error>
					</mat-form-field>
				</mat-grid-tile>
				<mat-grid-tile colspan="3"
							   rowspan="1">
					<mat-form-field class="form-group"
									appearance="legacy">
						<mat-label>{{ 'CUENTAS_CONTABLES.form_moneda' | translate }}*</mat-label>
						<mat-select [formControl]="form.controls['MonedaID']">
							<mat-option *ngFor="let moneda of tipoMonedas"
										[value]="moneda.Id">
								{{ moneda.Label }}
							</mat-option>
						</mat-select>
						<mat-error *ngIf="form.controls['MonedaID'].errors">
							{{ form.controls["MonedaID"].errors.msg || ("CUENTAS_CONTABLES.form_error" | translate) }}
						</mat-error>
					</mat-form-field>
				</mat-grid-tile>
				<mat-grid-tile colspan="6" rowspan="1" *ngIf="action != 'ver'">
					<button mat-flat-button 						
						color="primary"
						type="submit">{{ 'CUENTAS_CONTABLES.form_confirmar' | translate }}</button>				   
				</mat-grid-tile>
			</mat-grid-list>			
		</form>		
	</nb-card-body>
</nb-card>
<nb-card>
	<nb-card-body>
			<button mat-flat-button class="btn btn-warning text-white"
				(click)="openDialog()"
				type="button">movimientos</button>	
	</nb-card-body>
</nb-card>
